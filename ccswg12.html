<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Eric Rochester, Scholar’s Lab, University of Virginia" />
  <title>Critical Code Studies Working Group 2012</title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
    <link href='http://fonts.googleapis.com/css?family=Galdeano' rel='stylesheet' type='text/css'>
    <link href="stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <link href="stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
    <!--[if IE]>
        <link href="stylesheets/ie.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <![endif]-->
</head>
<body>
<header>
<h1 class="title">Critical Code Studies Working Group 2012</h1>
<h3 class="author">Eric Rochester, Scholar’s Lab, University of Virginia</h3>
</header>
<nav id="TOC">
<ul>
<li><a href="#code-critique">Code Critique</a><ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#about">About</a><ul>
<li><a href="#links">Links</a></li>
<li><a href="#deeper-links">Deeper Links</a></li>
</ul></li>
<li><a href="#installation">Installation</a><ul>
<li><a href="#getting-the-binary">Getting the Binary</a></li>
<li><a href="#getting-the-code">Getting the Code</a></li>
<li><a href="#compiling">Compiling</a></li>
<li><a href="#running">Running</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="code-critique"><a href="#TOC">Code Critique</a></h1>
<h2 id="overview"><a href="#TOC">Overview</a></h2>
<dl>
<dt>Name of Software</dt>
<dd><p>Bakers12</p>
</dd>
<dt>Programming Language</dt>
<dd><p>Haskell</p>
</dd>
<dt>Hardware Requirements</dt>
<dd><p>You’ll need hardware. PC.</p>
</dd>
<dt>Software Requirements</dt>
<dd><p>Git, Haskell, command line. See <em>Getting the Code</em> and <em>Compiling and Running</em>. This should work on Mac, Windows, and Linux. (And I’ve tested it on all of them.)</p>
</dd>
<dt>Year of Launch</dt>
<dd><p>2011</p>
</dd>
<dt>Author</dt>
<dd><p><script type="text/javascript">
<!--
h='&#118;&#x69;&#114;&#x67;&#x69;&#110;&#x69;&#x61;&#46;&#x65;&#100;&#x75;';a='&#64;';n='&#x65;&#114;&#x6f;&#x63;&#104;&#x65;&#x73;&#116;';e=n+a+h;
document.write('<a h'+'ref'+'="ma'+'ilto'+':'+e+'">'+'Eric Rochester'+'<\/'+'a'+'>');
// -->
</script><noscript>&#x45;&#114;&#x69;&#x63;&#32;&#82;&#x6f;&#x63;&#104;&#x65;&#x73;&#116;&#x65;&#114;&#32;&#40;&#x65;&#114;&#x6f;&#x63;&#104;&#x65;&#x73;&#116;&#32;&#x61;&#116;&#32;&#118;&#x69;&#114;&#x67;&#x69;&#110;&#x69;&#x61;&#32;&#100;&#x6f;&#116;&#32;&#x65;&#100;&#x75;&#x29;</noscript></p>
</dd>
</dl>
<h2 id="about"><a href="#TOC">About</a></h2>
<p>Baker’s 12 started out as a 13-day (one day per week) bootcamp-style project. The purpose was to learn Haskell and experiment with NLP. Each day was a sprint in which I would attempt to add a meaningful feature and finish the day with a working program. Since then, I’ve given up on the intense workflow, but I’m continuing to develop the project in a more relaxed manner. Recently, I’ve started over. The original code is still in the <code>master</code> branch; the new code that we’re looking at is in the <code>dev</code> branch, in the file <a href="https://github.com/erochest/bakers12/blob/dev/lib/Text/Bakers12/Tokenizer.hs"><code>lib/Text/Bakers12/Tokenizer.hs</code></a>.</p>
<p>This chunk of code is the module to tokenize or lex text. It takes streams of texts and produces streams of tokens. The underlying library that it uses (<a href="http://hackage.haskell.org/package/enumerator" title="enumerator">enumerator</a>) allows it to stream a lot of data with constant memory usage. Because of the issues that I’m getting ready to outline, I’ve pushed most of my discussion of the code’s functionality into the comments.</p>
<p>I’m interested in how the abstractions that make code powerful and useful also push against and prevent readers—all readers, but especially non-expert readers—from interpreting these texts. With that in mind, I’ve selected this section of code not only because it’s an important, central part of this program, but also because it’s fairly dense. It contains abstractions that are probably unfamiliar to most programmers (functional programming and monads), and it uses a complicated library (enumerators). Both monads and enumerators rely on a lot of hidden code, and as such they resist easy interpretation by even many sophisticated readers.</p>
<p>To help make this more approachable, I’ve added a lot of comments—many more than I normally would. But even here, looking at the <a href="http://jashkenas.github.com/docco/">docco</a>-generated documentation, it’s debatable whether those comments help or hurt readability.</p>
<p>I’m interested here in questions about how to make the code more approachable. I’m undecided whether this is possible or, from the developer’s point of view, desirable. The interplay between powerful abstractions and accessibility, between tackling complex tasks and communication, seem to create an inherent tension in the text. Is there anyway to make this code more legible, either through the code itself, through comments, or through external tools? Is this legibility even desirable?</p>
<h3 id="links"><a href="#TOC">Links</a></h3>
<ul>
<li><a href="http://www.ericrochester.com/bakers12/docs/Text/Bakers12/Tokenizer.html"><code class="url">http://www.ericrochester.com/bakers12/docs/Text/Bakers12/Tokenizer.html</code></a></li>
<li><a href="https://github.com/erochest/bakers12/blob/dev/lib/Text/Bakers12/Tokenizer.hs"><code class="url">https://github.com/erochest/bakers12/blob/dev/lib/Text/Bakers12/Tokenizer.hs</code></a></li>
<li><a href="http://www.ericrochester.com/bakers12/ccswg12.html"><code class="url">http://www.ericrochester.com/bakers12/ccswg12.html</code></a></li>
</ul>
<h3 id="deeper-links"><a href="#TOC">Deeper Links</a></h3>
<p>If you want more background on some of the concepts involved, I’ve found these links to be helpful:</p>
<ul>
<li><a href="http://en.wikibooks.org/wiki/Haskell/Monads">Haskell Wikibook, Understanding Monads</a></li>
<li><a href="http://www.mew.org/~kazu/proj/enumerator/">A tutorial on the enumerator library</a></li>
<li><a href="http://www.yesodweb.com/book/enumerator">Yesod Book: Enumerator Package</a></li>
<li><a href="http://therning.org/magnus/archives/735">Trying to work out iteratees</a></li>
</ul>
<h2 id="installation"><a href="#TOC">Installation</a></h2>
<h3 id="getting-the-binary"><a href="#TOC">Getting the Binary</a></h3>
<p>If requested, I’ll dig up some pre-compiled binaries for your platform. Email me.</p>
<h3 id="getting-the-code"><a href="#TOC">Getting the Code</a></h3>
<p>To get the code, either use <code>git</code>:</p>
<pre><code>git clone --branch dev git://github.com/erochest/bakers12.git
</code></pre>
<p>Or download it from</p>
<ul>
<li><a href="https://github.com/erochest/bakers12/zipball/dev"><code class="url">https://github.com/erochest/bakers12/zipball/dev</code></a></li>
<li><a href="https://github.com/erochest/bakers12/tarball/dev"><code class="url">https://github.com/erochest/bakers12/tarball/dev</code></a></li>
</ul>
<h3 id="compiling"><a href="#TOC">Compiling</a></h3>
<p>If you don’t already have Haskell installed, the easiest way to get running is to download and install the <a href="http://hackage.haskell.org/platform/" title="Haskell Platform">Haskell Platform</a>.</p>
<p>Now, open up a command line (Terminal, console, or whatever your platform calls it). Obviously, you’ll need to change the first line to change into whatever directory you clones or unpacked the source into.</p>
<pre><code>cd bakers12
cabal update
cabal install
</code></pre>
<p>That’s it. It will download any dependencies it needs and compile the executable. (You can ignore any compiler warnings.) It will also install it into a place of its own choosing. This varies by platform, and can be a little hard to find (see <a href="http://www.haskell.org/cabal/users-guide/#paths-in-the-simple-build-system" title="Installation Paths">this chart</a>, which actually doesn’t cover the Mac locations).</p>
<p>Fortunately, you can also get to the executable in the source directory, inside <code>dist/build/bakers12</code>. That file should contain everything, so you can just copy it wherever is convenient.</p>
<h3 id="running"><a href="#TOC">Running</a></h3>
<p>Assuming that the you’ve successfully <a href="#compiling">compiled the program</a> or <a href="#getting-the-binary">downloaded it</a> and that you’ve put it somewhere on your path, you can open a console window and use it like this:</p>
<pre><code>$ bakers12 -\?
bakers12 v0.0.0, (c) Eric Rochester 2011, 2012

bakers12 [OPTIONS] [FILES/DIRS]

Common flags:
  -f --filter=TOKEN FILTER   The filter to use on the output tokens. This can
                             be one of 'null', 'minimal', 'penn'. The default
                             is 'minimal'.
  -F --format=OUTPUT FORMAT  The output format to use. This can be either
                             'csv' or 'json'. If there is no input, currently
                             the JSON formatter outputs nothing. This should
                             probably be an empty list.
  -? --help                  Display help message
  -V --version               Print version information

This takes one or files and tokenizes them.

$ bakers12 -f penn README.md | head
&quot;#&quot;,&quot;#&quot;,1,PunctuationToken,README.md,1
baker,Baker,5,AlphaToken,README.md,3
&quot;'s&quot;,&quot;'s&quot;,2,PunctuationToken,README.md,8
dozen,Dozen,5,AlphaToken,README.md,11
this,This,4,AlphaToken,README.md,18
is,is,2,AlphaToken,README.md,23
a,a,1,AlphaToken,README.md,26
boot,boot,4,AlphaToken,README.md,28
&quot;-&quot;,&quot;-&quot;,1,PunctuationToken,README.md,32

$ bakers12 -f penn -F json README.md  | aeson-pretty | head -25
[
    {
        &quot;offset&quot;: 1,
        &quot;source&quot;: &quot;README.md&quot;,
        &quot;text&quot;: &quot;#&quot;,
        &quot;raw&quot;: &quot;#&quot;,
        &quot;length&quot;: 1,
        &quot;type&quot;: &quot;PunctuationToken&quot;
    },
    {
        &quot;offset&quot;: 3,
        &quot;source&quot;: &quot;README.md&quot;,
        &quot;text&quot;: &quot;baker&quot;,
        &quot;raw&quot;: &quot;Baker&quot;,
        &quot;length&quot;: 5,
        &quot;type&quot;: &quot;AlphaToken&quot;
    },
    {
        &quot;offset&quot;: 8,
        &quot;source&quot;: &quot;README.md&quot;,
        &quot;text&quot;: &quot;'s&quot;,
        &quot;raw&quot;: &quot;'s&quot;,
        &quot;length&quot;: 2,
        &quot;type&quot;: &quot;PunctuationToken&quot;
    },
</code></pre>
<p>(<code>aeson-pretty</code> is a utility for pretty-printing JSON.)</p>
<p>Originally, this had more features. But I decided that I wanted to go in a slightly different direction, so I razed it to the ground and started over. The original version is on the <code>master</code> branch, however, so you can check that you if you want.</p>
<footer>
  <div class='right'>
    <a rel="license" href="http://creativecommons.org/licenses/by/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/3.0/88x31.png" /></a>
  </div>
  <div class='right'>
    Eric Rochester<br />
    Scholars' Lab<br />
    University of Virginia
  </div>
</footer>
</body>
</html>
